

- `2023년 2월 16일` 수습기간 끝
- [코틀린 스터디 회고](https://jdalma.github.io/2023y02m/javatokotlin/)


## 2차 트레이닝 프로젝트

이번에 2차 트레이닝 프로젝트로 진행되었던 **사용자 검색식 유효성 검증**을 일부분 끝내고 기획자, 프론트 개발자, QA 인원과 회의를 진행했다.  
전 회사에서는 개발을 혼자 진행해왔었는데, 얘기를 나누면서 놓치고 있었던 부분도 발견되기도 하고, 기획의 의도를 확실하게 알게 되기도 하고, 사용자들한테 이런 편의를 줄 수 있겠다 라는게 느껴졌다.  
그리고 **테스트 코드가 이번 프로젝트에서 빛을 발했다.**  
  
부하 테스트 때 쓰는 테스트 케이스 파일들로 `통합 테스트`를 작성하고 스스로 생각한 테스트 케이스로 `단위 테스트`를 작성해놓은 것이 **수정사항이 생겼을 때나, 리팩토링할 때 빠르게 업무를 진행할 수 있었다.**  
요즘 **테스트 코드의 이점을 확실히 느끼고 있어** 테스트 코드를 더 잘 작성하고 싶다는 욕심이 든다.  
  
## 테스트 서버 반영

로컬에서 rabbitmq를 세팅하고 테스트하여, 테스트 서버에도 rabbitmq를 세팅하고 로그가 잘 쌓이는지 확인하여야 했다. 
큐를 추가하고 바인딩될 룰을 정하였다.  
테스트 서버나 실제 서비스에 반영해본적이 없었는데 이번에 프론트 개발자가 테스트할 수 있게 테스트 서버에 반영해보는 작업을 했다.  
  
Bitbucket으로 형상관리를 하고, 실제 작업물은 넥서스에 도커 이미지로 업데이트한다.  
작업 흐름은 먼저 `dev1 ~ 4`, `conf1 ~ 4` 중에서 브랜치를 선택하여 작업한다.  
작업이 다 끝나면 선택한 브랜치와 같은 이름의 서버로 넥서스에 도커 이미지를 업데이트한다.  
그 업데이트된 도커 이미지를 포테이너에서 서비스를 업데이트하면 된다.  
*기존에 존재하지 않는 서비스라면(지금 처럼 새로운 서버를 개발한거라면) 포테이너에 추가로 정보를 작성하면 된다.*  
  
위와같은 작업을 진행하면서 공부해야 할 키워드들이 많이 나왔다.  
  
1. 도커, 도커 스웜
2. 포테이너
   1. [`RedHat` 컨테이너 오케스트레이션이란?](https://www.redhat.com/ko/topics/containers/what-is-container-orchestration)
3. 쉘 스크립트
  
회사 인프라에 대한 이해를 하려면 지금 제일 급한건 **도커**를 공부하는 것이다.  

## Git 브랜치와 커밋 전략

프론트 팀과 백엔드 팀에서 브랜치와 커밋전략은 다르게 적용되어있다.  
프론트 팀은 기능별 브랜치를 분리하여 작업이 다 끝나면 해당 브랜치를 메인 브랜치로 머지한다.  
백엔드 팀은 서버별 브랜치를 점유하여 작업이 다 끝나면 작업 브랜치를 메인 브랜치에 리베이스하고, 추가했던 브랜치는 삭제한다.  
  
깃 그래프가 깔끔해지기 때문에 후자를 선택한다고 한다.  
  
기능에 문제가 있어 **기능 단위로 롤백**을 하거나 **원하는 기능만 선태하여 배포**하는 작업은 이전 회사에서는 필요 없었어서 커밋 단위나 커밋 내용은 크게 신경쓰지 않고 하루 작업량을 보고하기 위한 수단으로 SVN을 실무에서 사용했었다.  
개인공부하면서 개인레포에 커밋하고 푸시하고 클론만 했던, 실무에서 Git을 사용해본적 없던 나한테는 신선한 고민이였다.  
SI회사를 다닐 떄 [이 글](https://techblog.woowahan.com/2553/)을 읽으면서 `"저렇게까지 관리하구나"` 라고 지나갔었는데, 이제 나도 같은 고민을 하게 되어서 즐거웠다.  
  
[`화해 기술 블로그` 브랜치 전략 수립을 위한 전문가의 조언들](https://blog.hwahae.co.kr/all/tech/9507) 이 글도 읽으면 좋다.
  

## 프로젝트 포기하기

**역량**에 대한 생각을 정리하고 싶어 이 내용을 적어본다.  
  
2차 트레이닝 프로젝트가 끝나고 다음 업무는 사용자 검색식을 ES의 [Search API](https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-search.html)로 변환하는, 기존 로직을 분석하고 고도화하는 업무였다.  
  
한마디로 **사용자 검색식을 ES의 QueryDSL에 맞게 (기본 검색식 보다 더 호율적이게)변환하는 작업**이였다.  
  
이 업무는 일정이 정해져있는 업무였다.  
분석,설계 기간에 3일 정도 분석을 하면서 `"내가 이 기간을 못 지키겠다."` , `"시간 투자 대비 그만한 결과를 내지 못 하겠다."` 라는 생각이 들어 현재 상황을 공유하고 설명하면서 이 업무는 내가 안하기로 했다.  
*개인적으로는 [ES QueryDSL](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html)을 학습할 수 있는 좋은 기회이지만 이건 내 욕심이다 라고 생각했다.*  
  
내가 `"이 업무는 나의 역량을 벗어났다."`라고 느껴서 일정을 맞추기 힘들겠다고 말하는게 맞을까?  
서비스의 코어 부분이라서 부담을 느끼기는 했지만 **부담감 때문에 업무를 포기할 생각은 추호도 없다.**  
부담만큼 내가 얻을 것은 그만큼 많다는 것을 알기 때문이다.  
  
코어 부분이라서 생긴 부담이 문제가 아니라 이 일정에 이 일을 진행을 못 할것 같다라고 느낀게 제일 컸다.  
QueryDSL을 학습하는 것에는 자신있었지만, 이 기능에 대한 히스토리와 도메인 지식이 부족함이 크다는 것을 느꼇기 때문이다.  
그 느낌이 맞는지는 나도 잘 모르겠다.  
  
**피드백이 빨라서 좋은 것 아닐까**라고 생각했지만, 한편으로는 `나의 한계를 내가 단정짓는건가`, `나의 역량은 이 정도 밖에 안되나?` 생각이 들었다.  
다시 이 정도의 벽을 느끼면 또 못 하겠다고 하진 않을 것 같다.  
이제 벽을 느껴도 부딪힐 생각이다.  

## 테스트 케이스

프로젝트 개발이 끝나고 QA가 테스트할 수 있게 서버에 반영하였다.  
단위 테스트와 통합 테스트를 작성하고 내심 엣지 케이스들을 잘 잡았지 않았을까 생각했다.  
하지만 QA를 진행하면서 제대로 작동하지 않는 케이스들이 쏟아져 나왔다.  
  
부하 테스트 때 사용하는 테스트 케이스(약 3만개)를 사용하면서 스스로 안일하게 생각한 것 같다.  
테스트 케이스를 조금만 더 생각하고 고심했다면 대부분의 케이스들은 잡을 수 있었을텐데..  
*어느정도 이해가 되는 케이스라면 신경쓰이지 않았을텐데* 테스트 코드 쓰자고 말하고 다닌 내가 창피하고 한심하다고 생각했다.  
**내가 작성하는 코드에 책임감을 많이 느끼면서 개발해야겠다.**  
  
실무에서 테스트 케이스를 적용해보려 노력하면서 부딪히는 일이 많다.  
레거시나 기존 서비스에도 테스트 코드를 작성하면 테스트 코드 훈련과 도메인에 대한 이해를 동시에 가져갈 수 있을텐데 용기가 없어서 인지 아직 진행은 못 하고있다.  
  
윤석님과 상담하면서 이 상황에 대해 `"다른 사람과 똑같이 정해진 시간안에 정해진 일만 하면서는 더 뛰어난 아웃풋을 낼 수 없다."`라고 조언을 해주셨다.   
**개인 공부 외적으로 절대적인 시간을 더 투자해야 좋은 아웃풋을 낼 수 있을 것이다.**  

## Jenkins CI/CD , 통합 테스트 구축하기

사이드 잡 느낌으로 업무를 주셨는데, 해보고 싶었던 일이었다.  
현재 테스트 중이며 정리하고 보고서를 작성하여 회사에 [공유](https://jdalma.github.io/2023y03m/cicd/)할 생각이다.  

## 슬로우 쿼리로 인한 서비스 장애




## 마인드 셋

장애도 내보고, 프로젝트를 포기도 해보고 간단한 테스트 케이스도 놓쳐보면서 스스로 실망을 많이 했다.  
시간이 지나면 4년차가 될텐데 `"4년차가 이 정도의 실력이라는게 말이되나?"`라는 생각을 자주한다.  
개발에 대한 의욕도 조금씩 떨어졌다.  
  
> 회사 업무를 진행하면서 창의성이 필요하고, 개인적인 의견과 생각을 반영할 수 있는 업무들이 있는데  
> 업무들이 성공적으로 끝나지 못 하더라도 스스로의 능력과 연관짓지 마라  
> 스스로가 부족해서 실패했다라는 생각은 하지마라  
  
나는 스스로 다른 사람과 비교해가면서 동기를 만들어 왔다.  
`"저 사람은 저 정도인데 나는?"`, `"나도 두 손, 두 다리, 손가락 10개 다 있는데 나는 왜 저렇게 못하지?"`  
이런 생각은 처음에는 효과적이였지만 시간이 지날수록 동기부여의 의미가 퇴색되고 스스로를 갉아먹는 생각이라고 느꼈다.  
  
그리고 윤석님과 얘기를 나눌 기회가 많았는데, (항상 찡찡거리기만 한 것 같다.)  
`내가 가지지 못한 것에 대한 집착이 크다는 피드백`을 주셨다.  
조급해서 그럴까? **남이 가진 것은 더 좋아보이고 내가 가진것은 하찮게 여기는 것 같다.**  
  
**남과 비교할게 아니라 스스로와 비교하면서 `"조금씩 나아지고 성장하고 있다"`고 생각하여야 한다.**  
마인드셋을 바꾸기 위해 의식적인 노력을 많이 해야겠다.  